<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Binary Search 二分搜索总结 | Chener丶</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="weigao.cc">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.71994f2f.css" as="style"><link rel="preload" href="/assets/js/app.ff413545.js" as="script"><link rel="preload" href="/assets/js/3.a9798fbe.js" as="script"><link rel="preload" href="/assets/js/1.76b01c69.js" as="script"><link rel="preload" href="/assets/js/15.8fb23eac.js" as="script"><link rel="preload" href="/assets/js/9.0cdfd736.js" as="script"><link rel="prefetch" href="/assets/js/10.0a183579.js"><link rel="prefetch" href="/assets/js/11.a03ef169.js"><link rel="prefetch" href="/assets/js/12.f26a7d7a.js"><link rel="prefetch" href="/assets/js/13.d3b95d41.js"><link rel="prefetch" href="/assets/js/14.4ea22ee2.js"><link rel="prefetch" href="/assets/js/16.cf8de121.js"><link rel="prefetch" href="/assets/js/17.c225ab11.js"><link rel="prefetch" href="/assets/js/18.11e29de6.js"><link rel="prefetch" href="/assets/js/19.8a55d76b.js"><link rel="prefetch" href="/assets/js/20.e4a0d4f9.js"><link rel="prefetch" href="/assets/js/21.bfa3ed5f.js"><link rel="prefetch" href="/assets/js/22.881078d3.js"><link rel="prefetch" href="/assets/js/23.b7063063.js"><link rel="prefetch" href="/assets/js/24.21afc6da.js"><link rel="prefetch" href="/assets/js/25.863e4060.js"><link rel="prefetch" href="/assets/js/26.3b9440f2.js"><link rel="prefetch" href="/assets/js/27.02956fa3.js"><link rel="prefetch" href="/assets/js/28.d326838a.js"><link rel="prefetch" href="/assets/js/29.f4789005.js"><link rel="prefetch" href="/assets/js/30.178fccd3.js"><link rel="prefetch" href="/assets/js/31.5e994fb5.js"><link rel="prefetch" href="/assets/js/32.69ace0dc.js"><link rel="prefetch" href="/assets/js/33.e80e519b.js"><link rel="prefetch" href="/assets/js/34.11406db4.js"><link rel="prefetch" href="/assets/js/35.70105e9a.js"><link rel="prefetch" href="/assets/js/36.7e1aa7a6.js"><link rel="prefetch" href="/assets/js/37.8f4fbae0.js"><link rel="prefetch" href="/assets/js/38.c0b3f0ad.js"><link rel="prefetch" href="/assets/js/39.2910de4d.js"><link rel="prefetch" href="/assets/js/4.d53fc5cb.js"><link rel="prefetch" href="/assets/js/40.96057ad6.js"><link rel="prefetch" href="/assets/js/41.7b92e916.js"><link rel="prefetch" href="/assets/js/42.cc499b8b.js"><link rel="prefetch" href="/assets/js/43.29ddf432.js"><link rel="prefetch" href="/assets/js/44.49411b58.js"><link rel="prefetch" href="/assets/js/45.f28f6522.js"><link rel="prefetch" href="/assets/js/46.e9ddcabc.js"><link rel="prefetch" href="/assets/js/47.282e2a7d.js"><link rel="prefetch" href="/assets/js/48.519e3a8e.js"><link rel="prefetch" href="/assets/js/49.242aa181.js"><link rel="prefetch" href="/assets/js/5.7aedaec4.js"><link rel="prefetch" href="/assets/js/50.1317de68.js"><link rel="prefetch" href="/assets/js/51.c34b4a17.js"><link rel="prefetch" href="/assets/js/52.3b7dd990.js"><link rel="prefetch" href="/assets/js/53.ed1e8e58.js"><link rel="prefetch" href="/assets/js/54.e8e04427.js"><link rel="prefetch" href="/assets/js/55.91b961cc.js"><link rel="prefetch" href="/assets/js/56.1f4b4373.js"><link rel="prefetch" href="/assets/js/57.24930676.js"><link rel="prefetch" href="/assets/js/58.0c07ef31.js"><link rel="prefetch" href="/assets/js/59.97c8f9ce.js"><link rel="prefetch" href="/assets/js/6.56dd9870.js"><link rel="prefetch" href="/assets/js/60.f576cac3.js"><link rel="prefetch" href="/assets/js/61.6e4fb3ef.js"><link rel="prefetch" href="/assets/js/62.500fedcd.js"><link rel="prefetch" href="/assets/js/63.7f31b89f.js"><link rel="prefetch" href="/assets/js/64.31554884.js"><link rel="prefetch" href="/assets/js/65.18b55458.js"><link rel="prefetch" href="/assets/js/66.4afdc430.js"><link rel="prefetch" href="/assets/js/67.61362a31.js"><link rel="prefetch" href="/assets/js/68.65a12531.js"><link rel="prefetch" href="/assets/js/69.541c8690.js"><link rel="prefetch" href="/assets/js/7.799fb789.js"><link rel="prefetch" href="/assets/js/70.ed1a8749.js"><link rel="prefetch" href="/assets/js/71.201c3cf0.js"><link rel="prefetch" href="/assets/js/72.e314ebf4.js"><link rel="prefetch" href="/assets/js/73.83a7e061.js"><link rel="prefetch" href="/assets/js/74.b3e1c780.js"><link rel="prefetch" href="/assets/js/75.c79f5b1a.js"><link rel="prefetch" href="/assets/js/76.1a92c366.js"><link rel="prefetch" href="/assets/js/77.7c7a602c.js"><link rel="prefetch" href="/assets/js/78.dd3c1e50.js"><link rel="prefetch" href="/assets/js/79.ff0da6f3.js"><link rel="prefetch" href="/assets/js/8.d10012db.js"><link rel="prefetch" href="/assets/js/80.4fdb3bf5.js"><link rel="prefetch" href="/assets/js/81.e8c76ed8.js"><link rel="prefetch" href="/assets/js/82.bacff8ea.js"><link rel="prefetch" href="/assets/js/83.355ad832.js"><link rel="prefetch" href="/assets/js/84.7aaaca56.js"><link rel="prefetch" href="/assets/js/85.5cfb875b.js"><link rel="prefetch" href="/assets/js/86.03aa4eeb.js"><link rel="prefetch" href="/assets/js/87.eacb2bae.js"><link rel="prefetch" href="/assets/js/88.eb7da425.js"><link rel="prefetch" href="/assets/js/89.8d98fea8.js"><link rel="prefetch" href="/assets/js/90.912b6c51.js"><link rel="prefetch" href="/assets/js/91.47042b16.js"><link rel="prefetch" href="/assets/js/92.2bab0beb.js"><link rel="prefetch" href="/assets/js/93.fe1eb37c.js"><link rel="prefetch" href="/assets/js/94.ddb8318d.js"><link rel="prefetch" href="/assets/js/95.026e939f.js"><link rel="prefetch" href="/assets/js/96.7f41b6ed.js">
    <link rel="stylesheet" href="/assets/css/0.styles.71994f2f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>Chener丶</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>weigao.cc</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>weigaochen</span>
            
          <span data-v-4e82dffc>2017 - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="Chener丶" class="logo"> <span class="site-name">Chener丶</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Algorithm/" class="nav-link"><i class="undefined"></i>
  Algorithm
</a></li><li class="dropdown-item"><!----> <a href="/categories/Server/" class="nav-link"><i class="undefined"></i>
  Server
</a></li><li class="dropdown-item"><!----> <a href="/categories/Cloud/" class="nav-link"><i class="undefined"></i>
  Cloud
</a></li><li class="dropdown-item"><!----> <a href="/categories/Linux/" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/categories/Database/" class="nav-link"><i class="undefined"></i>
  Database
</a></li><li class="dropdown-item"><!----> <a href="/categories/Frameworks/" class="nav-link"><i class="undefined"></i>
  Frameworks
</a></li><li class="dropdown-item"><!----> <a href="/categories/Python/" class="nav-link"><i class="undefined"></i>
  Python
</a></li><li class="dropdown-item"><!----> <a href="/categories/Frontend/" class="nav-link"><i class="undefined"></i>
  Frontend
</a></li><li class="dropdown-item"><!----> <a href="/categories/Grammar/" class="nav-link"><i class="undefined"></i>
  Grammar
</a></li><li class="dropdown-item"><!----> <a href="/categories/Networks/" class="nav-link"><i class="undefined"></i>
  Networks
</a></li><li class="dropdown-item"><!----> <a href="/categories/Others/" class="nav-link"><i class="undefined"></i>
  Others
</a></li><li class="dropdown-item"><!----> <a href="/categories/Projects/" class="nav-link"><i class="undefined"></i>
  Projects
</a></li><li class="dropdown-item"><!----> <a href="/categories/Research/" class="nav-link"><i class="undefined"></i>
  Research
</a></li><li class="dropdown-item"><!----> <a href="/categories/Tools/" class="nav-link"><i class="undefined"></i>
  Tools
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="mailto:mail@weigao.cc" class="nav-link external"><i class="iconfont reco-mail"></i>
  Email
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/chenweigao" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    weigaochen
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>79</h3> <h6 data-v-828910c6>文章</h6></div> <div data-v-828910c6><h3 data-v-828910c6>58</h3> <h6 data-v-828910c6>标签</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Algorithm/" class="nav-link"><i class="undefined"></i>
  Algorithm
</a></li><li class="dropdown-item"><!----> <a href="/categories/Server/" class="nav-link"><i class="undefined"></i>
  Server
</a></li><li class="dropdown-item"><!----> <a href="/categories/Cloud/" class="nav-link"><i class="undefined"></i>
  Cloud
</a></li><li class="dropdown-item"><!----> <a href="/categories/Linux/" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/categories/Database/" class="nav-link"><i class="undefined"></i>
  Database
</a></li><li class="dropdown-item"><!----> <a href="/categories/Frameworks/" class="nav-link"><i class="undefined"></i>
  Frameworks
</a></li><li class="dropdown-item"><!----> <a href="/categories/Python/" class="nav-link"><i class="undefined"></i>
  Python
</a></li><li class="dropdown-item"><!----> <a href="/categories/Frontend/" class="nav-link"><i class="undefined"></i>
  Frontend
</a></li><li class="dropdown-item"><!----> <a href="/categories/Grammar/" class="nav-link"><i class="undefined"></i>
  Grammar
</a></li><li class="dropdown-item"><!----> <a href="/categories/Networks/" class="nav-link"><i class="undefined"></i>
  Networks
</a></li><li class="dropdown-item"><!----> <a href="/categories/Others/" class="nav-link"><i class="undefined"></i>
  Others
</a></li><li class="dropdown-item"><!----> <a href="/categories/Projects/" class="nav-link"><i class="undefined"></i>
  Projects
</a></li><li class="dropdown-item"><!----> <a href="/categories/Research/" class="nav-link"><i class="undefined"></i>
  Research
</a></li><li class="dropdown-item"><!----> <a href="/categories/Tools/" class="nav-link"><i class="undefined"></i>
  Tools
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="mailto:mail@weigao.cc" class="nav-link external"><i class="iconfont reco-mail"></i>
  Email
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/chenweigao" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>Binary Search 二分搜索总结</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>weigaochen</span>
            
          <span data-v-4e82dffc>2017 - </span>
          2022
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">Binary Search 二分搜索总结</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>weigaochen</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>2019/9/12</span></i> <!----> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>algorithm</span><span class="tag-item" data-v-1ff7123e>binary_search</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="summary"><a href="#summary" class="header-anchor">#</a> Summary</h2> <h3 id="二分搜索模板"><a href="#二分搜索模板" class="header-anchor">#</a> 二分搜索模板</h3> <h3 id="基本的二分搜索算法"><a href="#基本的二分搜索算法" class="header-anchor">#</a> 基本的二分搜索算法</h3> <ol><li><p>手工实现</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">search</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> nums<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
        l<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token keyword">while</span> l <span class="token operator">&lt;=</span> r<span class="token punctuation">:</span>
            mid <span class="token operator">=</span> l <span class="token operator">+</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>
            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">:</span>
                l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
            <span class="token keyword">elif</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&gt;</span> target<span class="token punctuation">:</span>
                r <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> mid

        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
</code></pre></div></li> <li><p>使用 Python  <code>bisect</code>  库</p> <div class="language-python extra-class"><pre class="language-python"><code>    <span class="token keyword">def</span> <span class="token function">search_2</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        res <span class="token operator">=</span> bisect<span class="token punctuation">.</span>bisect_left<span class="token punctuation">(</span>nums<span class="token punctuation">,</span> target<span class="token punctuation">)</span>
        <span class="token keyword">if</span> res <span class="token operator">!=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token keyword">and</span> nums<span class="token punctuation">[</span>res<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>
            <span class="token keyword">return</span> res
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
</code></pre></div></li></ol> <h3 id="寻找左侧边界的二分搜索"><a href="#寻找左侧边界的二分搜索" class="header-anchor">#</a> 寻找左侧边界的二分搜索</h3> <ol><li><p>手工实现（边界条件为 <code>[ ]</code> ）</p> <div class="language-python extra-class"><pre class="language-python"><code>    <span class="token keyword">def</span> <span class="token function">search</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        l<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token keyword">while</span> l <span class="token operator">&lt;=</span> r<span class="token punctuation">:</span>
            mid <span class="token operator">=</span> l <span class="token operator">+</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>
            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">:</span>
                l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
            <span class="token keyword">elif</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&gt;</span> target<span class="token punctuation">:</span>
                r <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span>
            <span class="token keyword">elif</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>
                <span class="token comment"># 暂时不能返回，需要收缩右边界，锁定左侧边界</span>
                r <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token comment"># 检查越界情况。注意这边下面两个条件是二选一的</span>
        <span class="token keyword">if</span> l <span class="token operator">&gt;=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token keyword">or</span> nums<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">!=</span> target<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
        <span class="token keyword">return</span> l
</code></pre></div></li> <li><p>手工实现（边界条件为  <code>[ )</code> ）</p> <div class="language-python extra-class"><pre class="language-python"><code>    <span class="token keyword">def</span> <span class="token function">search</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        <span class="token comment"># 注意边界</span>
        l<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
        <span class="token keyword">while</span> l <span class="token operator">&lt;</span> r<span class="token punctuation">:</span>
            mid <span class="token operator">=</span> l <span class="token operator">+</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>
            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">:</span>
                l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
            <span class="token keyword">elif</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&gt;</span> target<span class="token punctuation">:</span>
                r <span class="token operator">=</span> mid
            <span class="token keyword">elif</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>
                <span class="token comment"># 注意</span>
                r <span class="token operator">=</span> mid
        <span class="token keyword">return</span> l
</code></pre></div></li> <li><p>使用  <code>bisect</code></p> <p>手工实现在很多情况下都需要调试，比较慢，因此使用  <code>bisect</code>  比较方便，其使用方式如下：</p> <ul><li><p>找到 <em>Find rightmost value less than target</em>：找到小于目标元素，离目标元素最近的元素（肯定在左边）。如  <code>[-1, 1, 3, 5, 9, 12]</code>  目标元素 2, 则返回了 1，表示 2 可以插入到 1 和 3 之间。对应的下标  <code>res - 1</code>  就是 1 的下标。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">search2</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        res <span class="token operator">=</span> bisect<span class="token punctuation">.</span>bisect_left<span class="token punctuation">(</span>nums<span class="token punctuation">,</span> target<span class="token punctuation">)</span>
        <span class="token keyword">if</span> res<span class="token punctuation">:</span>
            <span class="token keyword">return</span> nums<span class="token punctuation">[</span>res <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
</code></pre></div></li> <li><p>找到 <em>Find rightmost value less than or equal to target</em></p> <div class="language-python extra-class"><pre class="language-python"><code>    <span class="token keyword">def</span> <span class="token function">search3</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        res <span class="token operator">=</span> bisect<span class="token punctuation">.</span>bisect_right<span class="token punctuation">(</span>nums<span class="token punctuation">,</span> target<span class="token punctuation">)</span>
        <span class="token keyword">if</span> res<span class="token punctuation">:</span>
            <span class="token keyword">return</span> nums<span class="token punctuation">[</span>res <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
</code></pre></div></li></ul> <h3 id="寻找右侧边界的二分搜索"><a href="#寻找右侧边界的二分搜索" class="header-anchor">#</a> 寻找右侧边界的二分搜索</h3> <ol><li><p>手工实现</p> <div class="language-python extra-class"><pre class="language-python"><code>    <span class="token keyword">def</span> <span class="token function">search</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        l<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token keyword">while</span> l <span class="token operator">&lt;=</span> r<span class="token punctuation">:</span>
            mid <span class="token operator">=</span> l <span class="token operator">+</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>
            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">:</span>
                l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
            <span class="token keyword">elif</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&gt;</span> target<span class="token punctuation">:</span>
                r <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span>
            <span class="token keyword">elif</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>
                <span class="token comment"># 暂时不能返回，需要收缩左边界，锁定右侧边界</span>
                l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token comment"># 检查越界情况。注意这边下面两个条件是二选一的</span>
        <span class="token keyword">if</span> r <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token keyword">or</span> nums<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">!=</span> target<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
        <span class="token keyword">return</span> r
</code></pre></div></li> <li><p>手工实现（边界  <code>[)</code> ）</p> <div class="language-python extra-class"><pre class="language-python"><code>    <span class="token keyword">def</span> <span class="token function">search</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        l<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
        <span class="token keyword">while</span> l <span class="token operator">&lt;=</span> r<span class="token punctuation">:</span>
            mid <span class="token operator">=</span> l <span class="token operator">+</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>
            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">:</span>
                l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
            <span class="token keyword">elif</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&gt;</span> target<span class="token punctuation">:</span>
                r <span class="token operator">=</span> mid
            <span class="token keyword">elif</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>
                <span class="token comment"># 如果是寻找左侧边界，这边就是 r = mid</span>
                l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token comment"># 如果是寻找左侧边界，这边就是 l</span>
        <span class="token keyword">return</span> l <span class="token operator">-</span> <span class="token number">1</span> <span class="token comment"># 注意</span>
</code></pre></div></li> <li><p>使用库</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">find_gt</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token string">'Find leftmost value greater than x'</span>
    i <span class="token operator">=</span> bisect_right<span class="token punctuation">(</span>a<span class="token punctuation">,</span> x<span class="token punctuation">)</span>
    <span class="token keyword">if</span> i <span class="token operator">!=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    <span class="token keyword">raise</span> ValueError

<span class="token keyword">def</span> <span class="token function">find_ge</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token string">'Find leftmost item greater than or equal to x'</span>
    i <span class="token operator">=</span> bisect_left<span class="token punctuation">(</span>a<span class="token punctuation">,</span> x<span class="token punctuation">)</span>
    <span class="token keyword">if</span> i <span class="token operator">!=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    <span class="token keyword">raise</span> ValueError
</code></pre></div></li></ol></li></ol> <h3 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h3> <p>在二分查找中，要特别注意边界的问题，二分查找的边界，分为  <code>[left, right)</code>  和  <code>[left, right]</code> .</p> <ul><li>初始化时，形式为  <code>left = 0, right = n</code> , 其中  <code>n</code>  表示数组的长度，由于数组取不到下标  <code>n</code> , 故为左闭右开区间；</li> <li>初始化时，形式为  <code>left = 0, right = n - 1</code> , 故为左闭右闭区间。</li></ul> <div class="custom-block danger"><p class="title">bug!!!</p><p>对于左闭右开区间 ( <code>[left, right)</code>  ) 而言，应注意：</p> <p>在写代码时，应当注意边界条件：</p> <p>如果初始化为左闭右开区间，则当  <code>mid</code>  的值小于要查找的值的时候， <code>left = mid + 1</code>  是正确的</p> <p>而当  <code>mid</code>  的值大于要查找的值的时候（这时候需要向左查找），此时如果让  <code>right</code>  赋值为  <code>mid - 1</code> , 则有可能存在  <code>mid - 1</code>  正好是要查找的值的情况，要十分慎重。</p></div><p>基于此，在写二分查找时，可以基于以下原则：<a href="https://github.com/chenweigao/_code/blob/master/cpp/binary_search.cpp" target="_blank" rel="noopener noreferrer">标准程序参考链接<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol><li>使用左右闭区间初始化，查找后条件应当变成： <code>left = mid + 1</code>  and  <code>right = mid -1</code> , 否则会出现死循环；</li> <li>使用左闭右开区间初始化，查找后条件应当是： <code>left = mid + 1</code>  and  <code>right = mid</code> ;</li> <li><code>left</code>  初值为  <code>-1</code> , 循环条件使用  <code>while(left + 1 != right)</code> ;</li> <li>对边界条件专门进行判断。</li></ol> <h2 id="二分查找思路整理"><a href="#二分查找思路整理" class="header-anchor">#</a> 二分查找思路整理</h2> <p>有下面的例子，可以分为四种问题，提出二分查找：</p> <p><img src="/binary_search/binary_search_1.png" alt="binary_search_1"></p> <p>从一个新的角度区理解这个问题，该问题可以变为：<strong>找出图中的蓝红边界，即求出未知数 K</strong>。</p> <p><img src="/binary_search/binary_search_2.png" alt="binary_search_2"></p> <p>针对此问题，可以写出伪代码如下所示：</p> <div class="language- extra-class"><pre class="language-text"><code>l = -1, r = N
while l + 1 != r
  m = (l + r) / 2 取下界
  if isBlue(m)
    l = m
  else
    r = m
return l or r
</code></pre></div><p>有了以上的伪代码，图 1 中的问题答案分别为：</p> <p><img src="/binary_search/binary_search_3.png" alt="binary_search_3"></p> <p>参考视频：https://www.bilibili.com/video/BV1d54y1q7k7</p> <h2 id="code"><a href="#code" class="header-anchor">#</a> Code</h2> <h3 id="wiki-伪代码"><a href="#wiki-伪代码" class="header-anchor">#</a> wiki 伪代码</h3> <div class="custom-block tip"><p class="title">记住口诀</p><p><strong>mid 在前，先小后大，先左后右</strong></p> <p>解析：mid 总是在比较的左边：mid &lt; target; 先写 mid 小于，对应左边 l = mid + 1; 再写 mid 大于，对应右边。</p></div><div class="language-c extra-class"><pre class="language-c"><code>function <span class="token function">binary_search</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> n<span class="token punctuation">,</span> T<span class="token punctuation">)</span><span class="token operator">:</span>
    L <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">0</span>
    R <span class="token operator">:</span><span class="token operator">=</span> n − <span class="token number">1</span>
    <span class="token keyword">while</span> L <span class="token operator">&lt;=</span> R<span class="token operator">:</span>
        m <span class="token operator">:</span><span class="token operator">=</span> <span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>L <span class="token operator">+</span> R<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> A<span class="token punctuation">[</span>m<span class="token punctuation">]</span> <span class="token operator">&lt;</span> T<span class="token operator">:</span>
            L <span class="token operator">:</span><span class="token operator">=</span> m <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> A<span class="token punctuation">[</span>m<span class="token punctuation">]</span> <span class="token operator">&gt;</span> T<span class="token operator">:</span>
            R <span class="token operator">:</span><span class="token operator">=</span> m <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token keyword">else</span><span class="token operator">:</span>
            <span class="token keyword">return</span> m
    <span class="token keyword">return</span> unsuccessful
</code></pre></div><h3 id="查找插入位置"><a href="#查找插入位置" class="header-anchor">#</a> 查找插入位置</h3> <p>二分查找有序序列中某个元素的位置，如果没找到，则返回其需要插入的位置 (LC 035):</p> <div class="demo-wrap"><div class="demo-nav"><i class="demo-nav-btn"><svg t="1572515960134" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1097" width="20" height="20" class="icon"><path d="M888 64H136q-30.016 0-51.008 20.992T64 136v752.992q0 28.992 20.992 50.496t51.008 21.504h752.992q28.992 0 50.496-21.504t21.504-50.496V136q0-30.016-21.504-51.008T888 64zM228.992 548.992q-15.008 0-25.504-10.496t-10.496-25.504 10.016-26.016l115.008-115.008-115.008-116.992q-10.016-11.008-10.016-25.504t10.496-24.992 25.504-10.496 24.992 10.016l140.992 142.016q10.016 11.008 10.016 26.016t-11.008 24.992l-140 140.992q-10.016 11.008-24.992 11.008z m389.024 0l-199.008-0.992q-15.008 0-25.504-10.496T383.008 512t10.496-25.504 25.504-10.496l199.008 0.992q15.008 0 25.504 10.496t10.496 25.504-11.008 25.504-24.992 10.496z" p-id="1098"></path></svg></i> <i class="demo-icon-arrow"><svg t="1572587847226" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3297" width="16" height="16" class="icon"><path d="M830.687738 603.071182c0 9.614985-3.933589 17.949814-11.799744 25.007557-7.867178 7.05672-17.222243 10.56052-28.065196 10.512425L232.716714 638.591163c-10.789741 0-20.144806-3.5038-28.064172-10.512425-7.919367-7.009647-11.852956-15.344476-11.799744-25.007557 0.053212-9.660011 3.986801-17.996886 11.799744-25.00551l279.05253-248.641917c7.867178-7.009647 17.22122-10.513448 28.065196-10.513448 10.842952 0 20.196994 3.504824 28.064172 10.513448l279.05253 248.641917C826.754149 585.074296 830.687738 593.411171 830.687738 603.071182z" p-id="3298"></path></svg></i></div> <div class="demo-code" style="display:none;"><div class="demo-code-nav"><button class="demo-code-btn active">Python</button></div> <div class="demo-code-content"><div class="demo-code-item"><div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">binarySearch</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">:</span>
    l<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>

    <span class="token keyword">while</span> l <span class="token operator">&lt;=</span> r<span class="token punctuation">:</span>
        mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>
        <span class="token keyword">if</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">:</span>
            l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            r <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span>
    <span class="token keyword">return</span> l</code></pre></div></div> <i class="demo-code-content-copy"><svg t="1572585974849" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1695" width="20" height="20" class="icon" style="fill:#fff;"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="1696"></path></svg></i> <!----></div></div> <div class="demo-main"><!----></div></div> <h3 id="bisect"><a href="#bisect" class="header-anchor">#</a> bisect</h3> <p>或者使用 Python 自带的 <strong>bisect</strong>:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> bisect
nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>bisect<span class="token punctuation">.</span>bisect<span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 4</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>bisect<span class="token punctuation">.</span>bisect_left<span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 2</span>
</code></pre></div><p>注意到， <code>bisect()</code>  默认会查找元素需要插入的位置 (<strong>指下标</strong>)，如果是重复的元素，则会返回其最右侧可以插入的位置，使用  <code>bisect_left()</code>  可以返回其左侧位置。</p> <h3 id="向上、下取整"><a href="#向上、下取整" class="header-anchor">#</a> 向上、下取整</h3> <ol><li><p>使用 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mfrac><mjx-frac><mjx-num><mjx-nstrut></mjx-nstrut><mjx-mrow size="s"><mjx-mo class="mjx-n"><mjx-c c="("></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="A"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="+"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="B"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c c=")"></mjx-c></mjx-mo></mjx-mrow></mjx-num><mjx-dbox><mjx-dtable><mjx-line></mjx-line><mjx-row><mjx-den><mjx-dstrut></mjx-dstrut><mjx-mi size="s" class="mjx-i"><mjx-c c="B"></mjx-c></mjx-mi></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-math></mjx-container> 计算</p></li> <li><p>使用  <code>math.ceil()</code>  和  <code>math.floor()</code> :</p></li></ol> <div class="language-py extra-class"><pre class="language-py"><code>imprt math
math<span class="token punctuation">.</span>ceil<span class="token punctuation">(</span><span class="token number">7</span><span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment"># 2</span>
math<span class="token punctuation">.</span>floor<span class="token punctuation">(</span><span class="token number">7</span><span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment"># 1 or 7//4</span>
<span class="token builtin">round</span><span class="token punctuation">(</span><span class="token number">2.6</span><span class="token punctuation">)</span> <span class="token comment"># 3 四舍五入</span>
</code></pre></div><p>一般而言，我们在快速排序或者二分查找中如果要计算 mid, 则可以使用 </p><p><mjx-container jax="CHTML" display="true" class="MathJax"><mjx-math display="true" class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mi space="4" class="mjx-i"><mjx-c c="l"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="f"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="+"></mjx-c></mjx-mo><mjx-mfrac space="3"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mrow><mjx-mi class="mjx-i"><mjx-c c="r"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="g"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="h"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="l"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="f"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi></mjx-mrow></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mn class="mjx-n"><mjx-c c="2"></mjx-c></mjx-mn></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-math></mjx-container></p> 来计算，可以参考<a href="https://github.com/chenweigao/_code/blob/master/data_struct/binary_search.py" target="_blank" rel="noopener noreferrer">二分查找 python 代码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><p></p> <h2 id="problems"><a href="#problems" class="header-anchor">#</a> Problems</h2> <h3 id="查找二维数组中是否存在某个元素"><a href="#查找二维数组中是否存在某个元素" class="header-anchor">#</a> 查找二维数组中是否存在某个元素</h3> <p>在一个二维数组中（每个一维数组的长度相同），每一行都按照从左到右递增的顺序排序，每一列都按照从上到下递增的顺序排序。
请完成一个函数，输入这样的一个二维数组和一个整数，判断数组中是否含有该整数。</p> <div class="demo-wrap"><div class="demo-nav"><i class="demo-nav-btn"><svg t="1572515960134" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1097" width="20" height="20" class="icon"><path d="M888 64H136q-30.016 0-51.008 20.992T64 136v752.992q0 28.992 20.992 50.496t51.008 21.504h752.992q28.992 0 50.496-21.504t21.504-50.496V136q0-30.016-21.504-51.008T888 64zM228.992 548.992q-15.008 0-25.504-10.496t-10.496-25.504 10.016-26.016l115.008-115.008-115.008-116.992q-10.016-11.008-10.016-25.504t10.496-24.992 25.504-10.496 24.992 10.016l140.992 142.016q10.016 11.008 10.016 26.016t-11.008 24.992l-140 140.992q-10.016 11.008-24.992 11.008z m389.024 0l-199.008-0.992q-15.008 0-25.504-10.496T383.008 512t10.496-25.504 25.504-10.496l199.008 0.992q15.008 0 25.504 10.496t10.496 25.504-11.008 25.504-24.992 10.496z" p-id="1098"></path></svg></i> <i class="demo-icon-arrow"><svg t="1572587847226" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3297" width="16" height="16" class="icon"><path d="M830.687738 603.071182c0 9.614985-3.933589 17.949814-11.799744 25.007557-7.867178 7.05672-17.222243 10.56052-28.065196 10.512425L232.716714 638.591163c-10.789741 0-20.144806-3.5038-28.064172-10.512425-7.919367-7.009647-11.852956-15.344476-11.799744-25.007557 0.053212-9.660011 3.986801-17.996886 11.799744-25.00551l279.05253-248.641917c7.867178-7.009647 17.22122-10.513448 28.065196-10.513448 10.842952 0 20.196994 3.504824 28.064172 10.513448l279.05253 248.641917C826.754149 585.074296 830.687738 593.411171 830.687738 603.071182z" p-id="3298"></path></svg></i></div> <div class="demo-code" style="display:none;"><div class="demo-code-nav"><button class="demo-code-btn active">Python</button></div> <div class="demo-code-content"><div class="demo-code-item"><div class="language-py extra-class"><pre class="language-py"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
利用二分查找的思想：
需要遍历每一行得到最后的答案，这个操作顺便复习一下二分查找
&quot;&quot;&quot;</span>

<span class="token keyword">def</span> <span class="token function">find_in_array_binary_search</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> alist<span class="token punctuation">,</span> target<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">bool</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>alist<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        l <span class="token operator">=</span> <span class="token number">0</span>
        r <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>alist<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token keyword">while</span> l <span class="token operator">&lt;=</span> r<span class="token punctuation">:</span>
            mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>
            <span class="token comment"># mid = l + (r - l) // 2</span>
            <span class="token keyword">if</span> target <span class="token operator">&lt;</span> alist<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">:</span>
                l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
            <span class="token keyword">elif</span> target <span class="token operator">&gt;</span> alist<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">:</span>
                r <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token boolean">True</span>
    <span class="token keyword">return</span> <span class="token boolean">False</span></code></pre></div></div> <i class="demo-code-content-copy"><svg t="1572585974849" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1695" width="20" height="20" class="icon" style="fill:#fff;"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="1696"></path></svg></i> <!----></div></div> <div class="demo-main"><!----></div></div> <div class="custom-block tip"><p class="title"></p><p>注意到这里用到了 <strong>先小 (&lt;) 后大 (&gt;), 先左 (l) 后右</strong> 的口诀。</p></div><h3 id="完全平方数"><a href="#完全平方数" class="header-anchor">#</a> 完全平方数</h3> <p>使用二分查找判断某个数是否完全平方数：</p> <div class="demo-wrap"><div class="demo-nav"><i class="demo-nav-btn"><svg t="1572515960134" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1097" width="20" height="20" class="icon"><path d="M888 64H136q-30.016 0-51.008 20.992T64 136v752.992q0 28.992 20.992 50.496t51.008 21.504h752.992q28.992 0 50.496-21.504t21.504-50.496V136q0-30.016-21.504-51.008T888 64zM228.992 548.992q-15.008 0-25.504-10.496t-10.496-25.504 10.016-26.016l115.008-115.008-115.008-116.992q-10.016-11.008-10.016-25.504t10.496-24.992 25.504-10.496 24.992 10.016l140.992 142.016q10.016 11.008 10.016 26.016t-11.008 24.992l-140 140.992q-10.016 11.008-24.992 11.008z m389.024 0l-199.008-0.992q-15.008 0-25.504-10.496T383.008 512t10.496-25.504 25.504-10.496l199.008 0.992q15.008 0 25.504 10.496t10.496 25.504-11.008 25.504-24.992 10.496z" p-id="1098"></path></svg></i> <i class="demo-icon-arrow"><svg t="1572587847226" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3297" width="16" height="16" class="icon"><path d="M830.687738 603.071182c0 9.614985-3.933589 17.949814-11.799744 25.007557-7.867178 7.05672-17.222243 10.56052-28.065196 10.512425L232.716714 638.591163c-10.789741 0-20.144806-3.5038-28.064172-10.512425-7.919367-7.009647-11.852956-15.344476-11.799744-25.007557 0.053212-9.660011 3.986801-17.996886 11.799744-25.00551l279.05253-248.641917c7.867178-7.009647 17.22122-10.513448 28.065196-10.513448 10.842952 0 20.196994 3.504824 28.064172 10.513448l279.05253 248.641917C826.754149 585.074296 830.687738 593.411171 830.687738 603.071182z" p-id="3298"></path></svg></i></div> <div class="demo-code" style="display:none;"><div class="demo-code-nav"><button class="demo-code-btn active">Python</button></div> <div class="demo-code-content"><div class="demo-code-item"><div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">isPerfectSquare</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> num<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">bool</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">'''
    using binary search
    '''</span>
    l<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> num
    <span class="token keyword">while</span> l <span class="token operator">&lt;=</span> r<span class="token punctuation">:</span>
        mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>
        <span class="token keyword">if</span> mid <span class="token operator">*</span> mid <span class="token operator">==</span> num<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>
        <span class="token keyword">elif</span> mid <span class="token operator">*</span> mid <span class="token operator">&lt;</span> num<span class="token punctuation">:</span>
            l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            r <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span>
    <span class="token keyword">return</span> <span class="token boolean">False</span></code></pre></div></div> <i class="demo-code-content-copy"><svg t="1572585974849" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1695" width="20" height="20" class="icon" style="fill:#fff;"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="1696"></path></svg></i> <!----></div></div> <div class="demo-main"><!----></div></div> <h3 id="数字在排序数组中出现的次数"><a href="#数字在排序数组中出现的次数" class="header-anchor">#</a> 数字在排序数组中出现的次数</h3> <blockquote><p>统计一个数字在排序数组中出现的次数。</p></blockquote> <p>使用二分查找，首先查找在前面出现的位置 start, 再查找在后面出现的位置 end, 然后相减得到答案。</p> <p>这个题目对查找插入位置的概念进行了强化：</p> <div class="demo-wrap"><div class="demo-nav"><i class="demo-nav-btn"><svg t="1572515960134" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1097" width="20" height="20" class="icon"><path d="M888 64H136q-30.016 0-51.008 20.992T64 136v752.992q0 28.992 20.992 50.496t51.008 21.504h752.992q28.992 0 50.496-21.504t21.504-50.496V136q0-30.016-21.504-51.008T888 64zM228.992 548.992q-15.008 0-25.504-10.496t-10.496-25.504 10.016-26.016l115.008-115.008-115.008-116.992q-10.016-11.008-10.016-25.504t10.496-24.992 25.504-10.496 24.992 10.016l140.992 142.016q10.016 11.008 10.016 26.016t-11.008 24.992l-140 140.992q-10.016 11.008-24.992 11.008z m389.024 0l-199.008-0.992q-15.008 0-25.504-10.496T383.008 512t10.496-25.504 25.504-10.496l199.008 0.992q15.008 0 25.504 10.496t10.496 25.504-11.008 25.504-24.992 10.496z" p-id="1098"></path></svg></i> <i class="demo-icon-arrow"><svg t="1572587847226" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3297" width="16" height="16" class="icon"><path d="M830.687738 603.071182c0 9.614985-3.933589 17.949814-11.799744 25.007557-7.867178 7.05672-17.222243 10.56052-28.065196 10.512425L232.716714 638.591163c-10.789741 0-20.144806-3.5038-28.064172-10.512425-7.919367-7.009647-11.852956-15.344476-11.799744-25.007557 0.053212-9.660011 3.986801-17.996886 11.799744-25.00551l279.05253-248.641917c7.867178-7.009647 17.22122-10.513448 28.065196-10.513448 10.842952 0 20.196994 3.504824 28.064172 10.513448l279.05253 248.641917C826.754149 585.074296 830.687738 593.411171 830.687738 603.071182z" p-id="3298"></path></svg></i></div> <div class="demo-code" style="display:none;"><div class="demo-code-nav"><button class="demo-code-btn active">Python</button></div> <div class="demo-code-content"><div class="demo-code-item"><div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">GetNumberOfK</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> data<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">:</span>
        start <span class="token operator">=</span> self<span class="token punctuation">.</span>get_start<span class="token punctuation">(</span>data<span class="token punctuation">,</span> k<span class="token punctuation">)</span>
        end <span class="token operator">=</span> self<span class="token punctuation">.</span>get_end<span class="token punctuation">(</span>data<span class="token punctuation">,</span> k<span class="token punctuation">)</span>
        <span class="token keyword">return</span> end <span class="token operator">-</span> start

    <span class="token keyword">def</span> <span class="token function">get_start</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> data<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">:</span>
        l<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token keyword">while</span> l <span class="token operator">&lt;=</span> r<span class="token punctuation">:</span>
            mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>
            <span class="token keyword">if</span> data<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> k<span class="token punctuation">:</span>
                l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                r <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token keyword">return</span> l

    <span class="token keyword">def</span> <span class="token function">get_end</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> data<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">:</span>
        l<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token keyword">while</span> l <span class="token operator">&lt;=</span> r<span class="token punctuation">:</span>
            mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>
            <span class="token keyword">if</span> data<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> k<span class="token punctuation">:</span>
                l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                r <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token keyword">return</span> l</code></pre></div></div> <i class="demo-code-content-copy"><svg t="1572585974849" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1695" width="20" height="20" class="icon" style="fill:#fff;"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="1696"></path></svg></i> <!----></div></div> <div class="demo-main"><!----></div></div> <h3 id="find-peak-element-寻找峰值"><a href="#find-peak-element-寻找峰值" class="header-anchor">#</a> Find Peak Element - 寻找峰值</h3> <blockquote><p>找寻一个数组的峰值</p> <p>输入: nums = [1,2,1,3,5,6,4]</p> <p>输出: 1 或 5</p> <p>解释：你的函数可以返回索引 1，其峰值元素为 2；或者返回索引 5， 其峰值元素为 6。</p></blockquote> <p>这道题目只要求返回一个峰值，所以可以从前往后遍历，遇到符合条件的返回即可，暴力解法和二分法的代码如下：</p> <div class="demo-wrap"><div class="demo-nav"><i class="demo-nav-btn"><svg t="1572515960134" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1097" width="20" height="20" class="icon"><path d="M888 64H136q-30.016 0-51.008 20.992T64 136v752.992q0 28.992 20.992 50.496t51.008 21.504h752.992q28.992 0 50.496-21.504t21.504-50.496V136q0-30.016-21.504-51.008T888 64zM228.992 548.992q-15.008 0-25.504-10.496t-10.496-25.504 10.016-26.016l115.008-115.008-115.008-116.992q-10.016-11.008-10.016-25.504t10.496-24.992 25.504-10.496 24.992 10.016l140.992 142.016q10.016 11.008 10.016 26.016t-11.008 24.992l-140 140.992q-10.016 11.008-24.992 11.008z m389.024 0l-199.008-0.992q-15.008 0-25.504-10.496T383.008 512t10.496-25.504 25.504-10.496l199.008 0.992q15.008 0 25.504 10.496t10.496 25.504-11.008 25.504-24.992 10.496z" p-id="1098"></path></svg></i> <i class="demo-icon-arrow"><svg t="1572587847226" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3297" width="16" height="16" class="icon"><path d="M830.687738 603.071182c0 9.614985-3.933589 17.949814-11.799744 25.007557-7.867178 7.05672-17.222243 10.56052-28.065196 10.512425L232.716714 638.591163c-10.789741 0-20.144806-3.5038-28.064172-10.512425-7.919367-7.009647-11.852956-15.344476-11.799744-25.007557 0.053212-9.660011 3.986801-17.996886 11.799744-25.00551l279.05253-248.641917c7.867178-7.009647 17.22122-10.513448 28.065196-10.513448 10.842952 0 20.196994 3.504824 28.064172 10.513448l279.05253 248.641917C826.754149 585.074296 830.687738 593.411171 830.687738 603.071182z" p-id="3298"></path></svg></i></div> <div class="demo-code" style="display:none;"><div class="demo-code-nav"><button class="demo-code-btn active">Python</button></div> <div class="demo-code-content"><div class="demo-code-item"><div class="language-py extra-class"><pre class="language-py"><code><span class="token comment"># 暴力求解</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">findPeakElement</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> <span class="token string">'List[int]'</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> i<span class="token operator">-</span><span class="token number">1</span>
        <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span>

<span class="token comment"># 二分查找</span>
<span class="token keyword">class</span> <span class="token class-name">SolutionBinarySearch</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">findPeakElement</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> <span class="token string">'List[int]'</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
        <span class="token keyword">if</span> n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token number">0</span>
        l <span class="token operator">=</span> <span class="token number">0</span>
        r <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token keyword">while</span> l <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> r<span class="token punctuation">:</span>
            mid <span class="token operator">=</span> l <span class="token operator">+</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>
            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                r <span class="token operator">=</span> mid
        <span class="token keyword">if</span> l <span class="token operator">==</span> n <span class="token operator">-</span> <span class="token number">1</span> <span class="token keyword">or</span> nums<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">&gt;</span> nums<span class="token punctuation">[</span>l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> l
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> r</code></pre></div></div> <i class="demo-code-content-copy"><svg t="1572585974849" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1695" width="20" height="20" class="icon" style="fill:#fff;"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="1696"></path></svg></i> <!----></div></div> <div class="demo-main"><!----></div></div> <h3 id="lc875-爱吃香蕉的珂珂"><a href="#lc875-爱吃香蕉的珂珂" class="header-anchor">#</a> LC875 爱吃香蕉的珂珂</h3> <blockquote><p>珂珂喜欢吃香蕉。这里有 N 堆香蕉，第 i 堆中有 piles [i] 根香蕉。警卫已经离开了，将在 H 小时后回来。</p> <p>珂珂可以决定她吃香蕉的速度 K （单位：根 / 小时）。每个小时，她将会选择一堆香蕉，从中吃掉 K 根。如果这堆香蕉少于 K 根，她将吃掉这堆的所有香蕉，然后这一小时内不会再吃更多的香蕉。</p> <p>珂珂喜欢慢慢吃，但仍然想在警卫回来前吃掉所有的香蕉。</p> <p>返回她可以在 H 小时内吃掉所有香蕉的最小速度 K（K 为整数）。</p> <p>来源：力扣（LeetCode）
链接：https://leetcode-cn.com/problems/koko-eating-bananas
 著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p></blockquote> <p>下面两种解法展示了不同边界条件下该如何处理：</p> <div class="demo-wrap"><div class="demo-nav"><i class="demo-nav-btn"><svg t="1572515960134" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1097" width="20" height="20" class="icon"><path d="M888 64H136q-30.016 0-51.008 20.992T64 136v752.992q0 28.992 20.992 50.496t51.008 21.504h752.992q28.992 0 50.496-21.504t21.504-50.496V136q0-30.016-21.504-51.008T888 64zM228.992 548.992q-15.008 0-25.504-10.496t-10.496-25.504 10.016-26.016l115.008-115.008-115.008-116.992q-10.016-11.008-10.016-25.504t10.496-24.992 25.504-10.496 24.992 10.016l140.992 142.016q10.016 11.008 10.016 26.016t-11.008 24.992l-140 140.992q-10.016 11.008-24.992 11.008z m389.024 0l-199.008-0.992q-15.008 0-25.504-10.496T383.008 512t10.496-25.504 25.504-10.496l199.008 0.992q15.008 0 25.504 10.496t10.496 25.504-11.008 25.504-24.992 10.496z" p-id="1098"></path></svg></i> <i class="demo-icon-arrow"><svg t="1572587847226" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3297" width="16" height="16" class="icon"><path d="M830.687738 603.071182c0 9.614985-3.933589 17.949814-11.799744 25.007557-7.867178 7.05672-17.222243 10.56052-28.065196 10.512425L232.716714 638.591163c-10.789741 0-20.144806-3.5038-28.064172-10.512425-7.919367-7.009647-11.852956-15.344476-11.799744-25.007557 0.053212-9.660011 3.986801-17.996886 11.799744-25.00551l279.05253-248.641917c7.867178-7.009647 17.22122-10.513448 28.065196-10.513448 10.842952 0 20.196994 3.504824 28.064172 10.513448l279.05253 248.641917C826.754149 585.074296 830.687738 593.411171 830.687738 603.071182z" p-id="3298"></path></svg></i></div> <div class="demo-code" style="display:none;"><div class="demo-code-nav"><button class="demo-code-btn active">Python</button></div> <div class="demo-code-content"><div class="demo-code-item"><div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">minEatingSpeed</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> piles<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> h<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        l<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token punctuation">(</span>piles<span class="token punctuation">)</span>
        <span class="token keyword">while</span> l <span class="token operator">&lt;</span> r<span class="token punctuation">:</span>
            mid <span class="token operator">=</span> l <span class="token operator">+</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>
            cost <span class="token operator">=</span> self<span class="token punctuation">.</span>check<span class="token punctuation">(</span>mid<span class="token punctuation">,</span> piles<span class="token punctuation">)</span>
            <span class="token comment"># 耗时太多，说明速度太慢了</span>
            <span class="token keyword">if</span> cost <span class="token operator">&gt;</span> h<span class="token punctuation">:</span>
                l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                r <span class="token operator">=</span> mid
        <span class="token keyword">return</span> l

    <span class="token keyword">def</span> <span class="token function">check</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> mid<span class="token punctuation">,</span> piles<span class="token punctuation">)</span><span class="token punctuation">:</span>
        cost <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> pile <span class="token keyword">in</span> piles<span class="token punctuation">:</span>
            <span class="token keyword">if</span> mid <span class="token operator">&gt;=</span> pile<span class="token punctuation">:</span>
                cost <span class="token operator">+=</span> <span class="token number">1</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token comment"># 向上取整</span>
                cost <span class="token operator">+=</span> ceil<span class="token punctuation">(</span>pile <span class="token operator">/</span> mid<span class="token punctuation">)</span>
                <span class="token comment"># cost += (pile + mid - 1) // mid</span>
        <span class="token keyword">return</span> cost

<span class="token keyword">class</span> <span class="token class-name">Test</span><span class="token punctuation">(</span>unittest<span class="token punctuation">.</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">setUp</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>s <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_1</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        piles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">]</span>
        H <span class="token operator">=</span> <span class="token number">8</span>
        res <span class="token operator">=</span> self<span class="token punctuation">.</span>s<span class="token punctuation">.</span>minEatingSpeed<span class="token punctuation">(</span>piles<span class="token punctuation">,</span> H<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_2</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        piles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span>
        H <span class="token operator">=</span> <span class="token number">6</span>
        res <span class="token operator">=</span> self<span class="token punctuation">.</span>s<span class="token punctuation">.</span>minEatingSpeed<span class="token punctuation">(</span>piles<span class="token punctuation">,</span> H<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_3</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        piles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">312884470</span><span class="token punctuation">]</span>
        H <span class="token operator">=</span> <span class="token number">312884469</span>
        res <span class="token operator">=</span> self<span class="token punctuation">.</span>s<span class="token punctuation">.</span>minEatingSpeed<span class="token punctuation">(</span>piles<span class="token punctuation">,</span> H<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_4</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        piles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1000000000</span><span class="token punctuation">]</span>
        H <span class="token operator">=</span> <span class="token number">2</span>
        res <span class="token operator">=</span> self<span class="token punctuation">.</span>s<span class="token punctuation">.</span>minEatingSpeed<span class="token punctuation">(</span>piles<span class="token punctuation">,</span> H<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span><span class="token number">500000000</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    unittest<span class="token punctuation">.</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div></div> <i class="demo-code-content-copy"><svg t="1572585974849" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1695" width="20" height="20" class="icon" style="fill:#fff;"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="1696"></path></svg></i> <!----></div></div> <div class="demo-main"><!----></div></div> <div class="demo-wrap"><div class="demo-nav"><i class="demo-nav-btn"><svg t="1572515960134" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1097" width="20" height="20" class="icon"><path d="M888 64H136q-30.016 0-51.008 20.992T64 136v752.992q0 28.992 20.992 50.496t51.008 21.504h752.992q28.992 0 50.496-21.504t21.504-50.496V136q0-30.016-21.504-51.008T888 64zM228.992 548.992q-15.008 0-25.504-10.496t-10.496-25.504 10.016-26.016l115.008-115.008-115.008-116.992q-10.016-11.008-10.016-25.504t10.496-24.992 25.504-10.496 24.992 10.016l140.992 142.016q10.016 11.008 10.016 26.016t-11.008 24.992l-140 140.992q-10.016 11.008-24.992 11.008z m389.024 0l-199.008-0.992q-15.008 0-25.504-10.496T383.008 512t10.496-25.504 25.504-10.496l199.008 0.992q15.008 0 25.504 10.496t10.496 25.504-11.008 25.504-24.992 10.496z" p-id="1098"></path></svg></i> <i class="demo-icon-arrow"><svg t="1572587847226" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3297" width="16" height="16" class="icon"><path d="M830.687738 603.071182c0 9.614985-3.933589 17.949814-11.799744 25.007557-7.867178 7.05672-17.222243 10.56052-28.065196 10.512425L232.716714 638.591163c-10.789741 0-20.144806-3.5038-28.064172-10.512425-7.919367-7.009647-11.852956-15.344476-11.799744-25.007557 0.053212-9.660011 3.986801-17.996886 11.799744-25.00551l279.05253-248.641917c7.867178-7.009647 17.22122-10.513448 28.065196-10.513448 10.842952 0 20.196994 3.504824 28.064172 10.513448l279.05253 248.641917C826.754149 585.074296 830.687738 593.411171 830.687738 603.071182z" p-id="3298"></path></svg></i></div> <div class="demo-code" style="display:none;"><div class="demo-code-nav"><button class="demo-code-btn active">Python</button></div> <div class="demo-code-content"><div class="demo-code-item"><div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">minEatingSpeed</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> piles<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> h<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        l<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token punctuation">(</span>piles<span class="token punctuation">)</span>
        <span class="token keyword">while</span> l <span class="token operator">&lt;</span> r<span class="token punctuation">:</span>
            mid <span class="token operator">=</span> l <span class="token operator">+</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>
            cost <span class="token operator">=</span> self<span class="token punctuation">.</span>check<span class="token punctuation">(</span>mid<span class="token punctuation">,</span> piles<span class="token punctuation">)</span>
            <span class="token comment"># 耗时太多，说明速度太慢了</span>
            <span class="token keyword">if</span> cost <span class="token operator">&gt;</span> h<span class="token punctuation">:</span>
                l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                r <span class="token operator">=</span> mid
        <span class="token keyword">return</span> l

    <span class="token keyword">def</span> <span class="token function">check</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> mid<span class="token punctuation">,</span> piles<span class="token punctuation">)</span><span class="token punctuation">:</span>
        cost <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> pile <span class="token keyword">in</span> piles<span class="token punctuation">:</span>
            <span class="token keyword">if</span> mid <span class="token operator">&gt;=</span> pile<span class="token punctuation">:</span>
                cost <span class="token operator">+=</span> <span class="token number">1</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token comment"># 向上取整</span>
                cost <span class="token operator">+=</span> ceil<span class="token punctuation">(</span>pile <span class="token operator">/</span> mid<span class="token punctuation">)</span>
                <span class="token comment"># cost += (pile + mid - 1) // mid</span>
        <span class="token keyword">return</span> cost

<span class="token keyword">class</span> <span class="token class-name">Test</span><span class="token punctuation">(</span>unittest<span class="token punctuation">.</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">setUp</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>s <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_1</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        piles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">]</span>
        H <span class="token operator">=</span> <span class="token number">8</span>
        res <span class="token operator">=</span> self<span class="token punctuation">.</span>s<span class="token punctuation">.</span>minEatingSpeed<span class="token punctuation">(</span>piles<span class="token punctuation">,</span> H<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_2</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        piles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span>
        H <span class="token operator">=</span> <span class="token number">6</span>
        res <span class="token operator">=</span> self<span class="token punctuation">.</span>s<span class="token punctuation">.</span>minEatingSpeed<span class="token punctuation">(</span>piles<span class="token punctuation">,</span> H<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_3</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        piles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">312884470</span><span class="token punctuation">]</span>
        H <span class="token operator">=</span> <span class="token number">312884469</span>
        res <span class="token operator">=</span> self<span class="token punctuation">.</span>s<span class="token punctuation">.</span>minEatingSpeed<span class="token punctuation">(</span>piles<span class="token punctuation">,</span> H<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_4</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        piles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1000000000</span><span class="token punctuation">]</span>
        H <span class="token operator">=</span> <span class="token number">2</span>
        res <span class="token operator">=</span> self<span class="token punctuation">.</span>s<span class="token punctuation">.</span>minEatingSpeed<span class="token punctuation">(</span>piles<span class="token punctuation">,</span> H<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span><span class="token number">500000000</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    unittest<span class="token punctuation">.</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div></div> <i class="demo-code-content-copy"><svg t="1572585974849" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1695" width="20" height="20" class="icon" style="fill:#fff;"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="1696"></path></svg></i> <!----></div></div> <div class="demo-main"><!----></div></div> <h3 id="lc1011-在-d-天内送达包裹的能力"><a href="#lc1011-在-d-天内送达包裹的能力" class="header-anchor">#</a> LC1011 在 D 天内送达包裹的能力</h3> <p><a href="https://leetcode-cn.com/problems/capacity-to-ship-packages-within-d-days/" target="_blank" rel="noopener noreferrer">1011. 在 D 天内送达包裹的能力<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>我们先从题目的示例看一下这个题要做什么（个人感觉二分类的题目初见都很迷惑）</p> <blockquote><p>输入：weights = [1,2,3,4,5,6,7,8,9,10], days = 5
 输出：15
 解释：
船舶最低载重 15 就能够在 5 天内送达所有包裹，如下所示：
第 1 天：1, 2, 3, 4, 5
 第 2 天：6, 7
 第 3 天：8
 第 4 天：9
 第 5 天：10</p> <p>请注意，货物必须按照给定的顺序装运，因此使用载重能力为 14 的船舶并将包装分成 (2, 3, 4, 5), (1, 6, 7), (8), (9), (10) 是不允许的。</p></blockquote> <p>翻译翻译：给定一个数组，每一次取出数组中的若干元素，需要刚好在规定的次数内取完，我们要求每一次取出来的数组的和的最大值是多少？</p> <p>这道题目和 LC875 爱吃香蕉的珂珂 有异曲同工之妙，我们将这两个部分放在一起研究。</p> <p>我们先给出自己的解法：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">shipWithinDays</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> weights<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> days<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        l<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>weights<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>weights<span class="token punctuation">)</span>
        <span class="token keyword">while</span> l <span class="token operator">&lt;</span> r<span class="token punctuation">:</span>
            mid <span class="token operator">=</span> l <span class="token operator">+</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>check<span class="token punctuation">(</span>mid<span class="token punctuation">,</span> weights<span class="token punctuation">)</span> <span class="token operator">&gt;</span> days<span class="token punctuation">:</span>
                l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                r <span class="token operator">=</span> mid
        <span class="token keyword">return</span> l

    <span class="token keyword">def</span> <span class="token function">check</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> mid<span class="token punctuation">,</span> weights<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 计算一下 mid 运输能力情况下需要多少天</span>
        res <span class="token operator">=</span> <span class="token number">1</span>
        current <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> weight <span class="token keyword">in</span> weights<span class="token punctuation">:</span>
            <span class="token keyword">if</span> current <span class="token operator">+</span> weight <span class="token operator">&gt;</span> mid<span class="token punctuation">:</span>
                res <span class="token operator">+=</span> <span class="token number">1</span>
                current <span class="token operator">=</span> <span class="token number">0</span>
            current <span class="token operator">+=</span> weight
        <span class="token keyword">return</span> res
</code></pre></div><p>思考一个问题：这个题目为什么可以用二分呢？</p> <p>按照官方题解的思路，我们翻译一下：假设我们知道了船只的运载能力  <code>x</code> , 当运载能力为  <code>x</code>  的时候，我们刚好可以在  <code>days</code>  天内运输完所有货物；当运载能力大于  <code>x</code>  的时候，我们也可以在  <code>days</code>  天内运输完所有货物；当运载能力小于  <code>x</code>  的时候，我们就不能在  <code>days</code>  天内运输完所有货物。</p> <p>也就是说，我们存在这一个边界条件  <code>x</code> ，这个  <code>x</code>  的取值范围在 0 ~ sum (货物) 之间，再进一步，就是在 最大的货物重量～sum (货物) 之间，我们在这个范围内查找符合条件的  <code>x</code> , 使其满足条件，我们就得到了解。</p> <p>思考我们需要满足什么条件呢？假设我们已经知道了运输的能力  <code>x</code> , 那么我们就把所有的货物拿这个  <code>x</code>  装一下，最后计算一下需要装载的天数，如果需要装载的天数比较多，那么我们应该增加  <code>x</code> , 反之我们我们减少 <code>x</code> , 如果正好的话，我们返回。</p> <p>我们在上面用了二分查找，二分查找是细节最多的，我们再次复习一下：</p> <p>首先我们思考一下，我们是要找左边界，还是右边界？或者就不是这个范围类型的？其实我们仔细来看，还会寻找左边界的，我们按照左边界的模板把这个重写一下：</p> <div class="language-python extra-class"><pre class="language-python"><code>    <span class="token keyword">def</span> <span class="token function">shipWithinDays</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> weights<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> days<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        l<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>weights<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>weights<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment"># 注意区间为 [ )</span>
        <span class="token keyword">while</span> l <span class="token operator">&lt;</span> r<span class="token punctuation">:</span> <span class="token comment"># &lt; </span>
            mid <span class="token operator">=</span> l <span class="token operator">+</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>check<span class="token punctuation">(</span>mid<span class="token punctuation">,</span> weights<span class="token punctuation">)</span> <span class="token operator">&gt;</span> days<span class="token punctuation">:</span>
                l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
            <span class="token keyword">elif</span> self<span class="token punctuation">.</span>check<span class="token punctuation">(</span>mid<span class="token punctuation">,</span> weights<span class="token punctuation">)</span> <span class="token operator">&lt;</span> days<span class="token punctuation">:</span>
                r <span class="token operator">=</span> mid <span class="token comment"># 注意</span>
            <span class="token keyword">elif</span> self<span class="token punctuation">.</span>check<span class="token punctuation">(</span>mid<span class="token punctuation">,</span> weights<span class="token punctuation">)</span> <span class="token operator">==</span> days<span class="token punctuation">:</span>
                r <span class="token operator">=</span> mid <span class="token comment"># 注意</span>

        <span class="token keyword">return</span> l
</code></pre></div><h3 id="lc826-安排工作以达到最大收益"><a href="#lc826-安排工作以达到最大收益" class="header-anchor">#</a> LC826 安排工作以达到最大收益</h3> <p><a href="https://leetcode-cn.com/problems/most-profit-assigning-work/" target="_blank" rel="noopener noreferrer">826. 安排工作以达到最大收益<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="二分解法"><a href="#二分解法" class="header-anchor">#</a> 二分解法</h4> <p>这个题目中有很多很多的细节可以参考，我们先给出一个二分的解法：</p> <div class="language-python extra-class"><pre class="language-python"><code>    <span class="token keyword">def</span> <span class="token function">maxProfitAssignment2</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> difficulty<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> profit<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> workers<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        <span class="token comment"># 注意我们排序的时候需要把difficulty和profit一起排序</span>
        difficulty<span class="token punctuation">,</span> profit <span class="token operator">=</span> <span class="token builtin">zip</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token builtin">sorted</span><span class="token punctuation">(</span><span class="token builtin">zip</span><span class="token punctuation">(</span>difficulty<span class="token punctuation">,</span> profit<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        res <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token comment"># 注意我们需要考虑一种情况就是：找到了最接近这个worker可以做的工作了，但是我们需要找到他能胜任所有工作的里面的最大利润</span>
        <span class="token comment"># 我们知道，排序以后的利润，如果前面的较大，后面的较小，我们完全可以用前面较大的利润替换掉后面较小的利润</span>
        max_profits <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>itertools<span class="token punctuation">.</span>accumulate<span class="token punctuation">(</span>profit<span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> worker <span class="token keyword">in</span> workers<span class="token punctuation">:</span>
            <span class="token comment"># 判断 worker 不能胜任最小难度的工作，就是没找到</span>
            <span class="token keyword">if</span> worker <span class="token operator">&lt;</span> <span class="token builtin">min</span><span class="token punctuation">(</span>difficulty<span class="token punctuation">)</span><span class="token punctuation">:</span>
                res <span class="token operator">+=</span> <span class="token number">0</span>
                <span class="token keyword">continue</span>
            idx <span class="token operator">=</span> bisect<span class="token punctuation">.</span>bisect<span class="token punctuation">(</span>difficulty<span class="token punctuation">,</span> worker<span class="token punctuation">)</span>
            res <span class="token operator">+=</span> max_profits<span class="token punctuation">[</span>idx <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token keyword">return</span> res
</code></pre></div><p>这里面先解析一下 Python 的一些语法：</p> <ol><li><p><code>difficulty, profit = zip(*sorted(zip(difficulty, profit)))</code></p> <p>这行代码的含义是，将  <code>difficulty</code>  和  <code>profit</code>  打包进行排序。</p> <table><thead><tr><th>param</th> <th>value</th></tr></thead> <tbody><tr><td><code>difficulty</code></td> <td>[68, 35, 52, 47, 86]</td></tr> <tr><td><code>profit</code></td> <td>[67, 17, 1, 81, 3]</td></tr> <tr><td><code>sorted(zip(difficulty, profit))</code></td> <td>[(35, 17), (47, 81), (52, 1), (68, 67), (86, 3)]</td></tr> <tr><td><code>difficulty, profit = zip(*sorted(zip(difficulty, profit)))</code></td> <td></td></tr> <tr><td><code>difficulty</code></td> <td>(35, 47, 52, 68, 86)</td></tr> <tr><td><code>profit</code></td> <td>(17, 81, 1, 67, 3)</td></tr></tbody></table> <p>我们可以看到，我们按照  <code>difficulty</code>  从小到大的顺序排列，并且  <code>profit</code>  和其对应关系也没有改变。</p> <p>而  <code>zip</code>  就是将其压缩以后，再进行解包，从而拿出来两个数组。</p></li> <li><p><code>max_profits = list(itertools.accumulate(profit, max))</code></p> <p>这行代码的意思是，举例来看，很直观：</p> <table><thead><tr><th>param</th> <th>value</th></tr></thead> <tbody><tr><td><code>profit</code></td> <td>[67, 17, 1, 81, 3]</td></tr> <tr><td><code>list(itertools.accumulate(profit, max))</code></td> <td>[67, 67, 67, 81, 81]</td></tr></tbody></table> <p>我们可以看出，就是从小到大进行了一个类似于排序的操作，如果后面遇到的元素比前面的小，就替换成前面的，反之则保持元素不变。</p></li> <li><p>一些优化</p> <p>除此之外，我们还有一些写法：</p> <div class="language-python extra-class"><pre class="language-python"><code>min_diff <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>difficulty<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">max_profit</span><span class="token punctuation">(</span>worker<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> worker <span class="token operator">&lt;</span> min_diff<span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">0</span>
    <span class="token keyword">return</span> max_profits<span class="token punctuation">[</span>bisect<span class="token punctuation">.</span>bisect<span class="token punctuation">(</span>difficulty<span class="token punctuation">,</span> worker<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>

<span class="token keyword">return</span> <span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span>max_profit<span class="token punctuation">,</span> worker<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>这个写法里面使用了一个函数来返回值，然后调用  <code>map</code>  去匹配到最终的值，也是一个很不错的写法。</p></li> <li><p>我们在这个题目里面用到了二分： <code>bisect.bisect()</code></p> <p>寻找元素插入的位置，如果很多个就插入到最右侧。</p></li></ol> <h4 id="巧妙解法"><a href="#巧妙解法" class="header-anchor">#</a> 巧妙解法</h4> <div class="language-python extra-class"><pre class="language-python"><code>    <span class="token keyword">def</span> <span class="token function">maxProfitAssignment3</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> difficulty<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> profit<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> workers<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        res <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token comment"># 这种方式出来的类似于[(10, 2), (20, 4), (30, 6), (40, 8), (50, 10)]，比较方便记忆写法</span>
        <span class="token comment"># a, b = zip(*[(10, 2), (20, 4), (30, 6), (40, 8), (50, 10)])</span>
        <span class="token comment"># a: (10, 20, 30, 40, 50)</span>
        <span class="token comment"># b: (2, 4, 6, 8, 10)</span>
        li <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span><span class="token builtin">zip</span><span class="token punctuation">(</span>profit<span class="token punctuation">,</span> difficulty<span class="token punctuation">)</span><span class="token punctuation">)</span>
        workers<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>
        res <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">while</span> workers <span class="token keyword">and</span> li<span class="token punctuation">:</span>
            <span class="token comment"># 利润最大的，能力最大的worker可以胜任</span>
            <span class="token keyword">if</span> workers<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;=</span> li<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                res <span class="token operator">+=</span> li<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                <span class="token comment"># 这个工人已经使用过了</span>
                workers<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                li<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> res
</code></pre></div><p>上述解法是比较巧妙的，我们先将  <code>profit</code>  和  <code>difficulty</code>  进行打包，然后我们倒序遍历 worker，这里倒序遍历 worker 比较绕，我们知道 worker 是按照能力的大小来排序的，我们将能力最强的 worker 匹配<s>难度</s>利润最大的，如果说这个能力最强的工人也胜任不了<s>难度</s>利润最大的工作的话，那么这个工作就没人可以胜任了，此时我们将这个工作给 pop 出去。</p> <p>但是如果我们发现这个工人可以胜任这个工作，这时候选择这个工作让这个工人做掉，这是正确的吗？还是按照上述表格的数据，我们给出  <code>li</code>  的排序结果： <code>[(1, 52), (3, 86), (17, 47), (67, 35), (81, 68)]</code> , 不难发现，这个排序结果是按照利润的大小来排序的，也就是说，我们是将能力最强的 worker 匹配了利润最高的，这个能力最强的如果搞不定利润最高的（能力不足），那么剩下的菜鸡就更不可能完成这个工作了，我们将这个工作干掉。</p> <p>我们要思考，这是最优的吗？其实是不难思考的：因为题目规定了每一个工人最多只能安排一个工作，所以说我们<strong>让能力最强的工人来搞利润最大的工作</strong>是毫无疑问的。</p> <p>题目中还说到了，一个工作可以完成多次。所以我们将某个工作搞定的时候，就降工人下岗掉，但是工作不变，直到后面出现的能力稍弱的工人无法胜任当前工作的时候，我们再将工作下架掉！</p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间: </span> <span class="time">2022年2月7日星期一 20:45</span></div></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/Algorithm/binary_search.html#summary" class="sidebar-link reco-side-summary" data-v-70334359>Summary</a></li><li class="level-3" data-v-70334359><a href="/Algorithm/binary_search.html#二分搜索模板" class="sidebar-link reco-side-二分搜索模板" data-v-70334359>二分搜索模板</a></li><li class="level-3" data-v-70334359><a href="/Algorithm/binary_search.html#基本的二分搜索算法" class="sidebar-link reco-side-基本的二分搜索算法" data-v-70334359>基本的二分搜索算法</a></li><li class="level-3" data-v-70334359><a href="/Algorithm/binary_search.html#寻找左侧边界的二分搜索" class="sidebar-link reco-side-寻找左侧边界的二分搜索" data-v-70334359>寻找左侧边界的二分搜索</a></li><li class="level-3" data-v-70334359><a href="/Algorithm/binary_search.html#寻找右侧边界的二分搜索" class="sidebar-link reco-side-寻找右侧边界的二分搜索" data-v-70334359>寻找右侧边界的二分搜索</a></li><li class="level-3" data-v-70334359><a href="/Algorithm/binary_search.html#参考" class="sidebar-link reco-side-参考" data-v-70334359>参考</a></li><li class="level-2" data-v-70334359><a href="/Algorithm/binary_search.html#二分查找思路整理" class="sidebar-link reco-side-二分查找思路整理" data-v-70334359>二分查找思路整理</a></li><li class="level-2" data-v-70334359><a href="/Algorithm/binary_search.html#code" class="sidebar-link reco-side-code" data-v-70334359>Code</a></li><li class="level-3" data-v-70334359><a href="/Algorithm/binary_search.html#wiki-伪代码" class="sidebar-link reco-side-wiki-伪代码" data-v-70334359>wiki 伪代码</a></li><li class="level-3" data-v-70334359><a href="/Algorithm/binary_search.html#查找插入位置" class="sidebar-link reco-side-查找插入位置" data-v-70334359>查找插入位置</a></li><li class="level-3" data-v-70334359><a href="/Algorithm/binary_search.html#bisect" class="sidebar-link reco-side-bisect" data-v-70334359>bisect</a></li><li class="level-3" data-v-70334359><a href="/Algorithm/binary_search.html#向上、下取整" class="sidebar-link reco-side-向上、下取整" data-v-70334359>向上、下取整</a></li><li class="level-2" data-v-70334359><a href="/Algorithm/binary_search.html#problems" class="sidebar-link reco-side-problems" data-v-70334359>Problems</a></li><li class="level-3" data-v-70334359><a href="/Algorithm/binary_search.html#查找二维数组中是否存在某个元素" class="sidebar-link reco-side-查找二维数组中是否存在某个元素" data-v-70334359>查找二维数组中是否存在某个元素</a></li><li class="level-3" data-v-70334359><a href="/Algorithm/binary_search.html#完全平方数" class="sidebar-link reco-side-完全平方数" data-v-70334359>完全平方数</a></li><li class="level-3" data-v-70334359><a href="/Algorithm/binary_search.html#数字在排序数组中出现的次数" class="sidebar-link reco-side-数字在排序数组中出现的次数" data-v-70334359>数字在排序数组中出现的次数</a></li><li class="level-3" data-v-70334359><a href="/Algorithm/binary_search.html#find-peak-element-寻找峰值" class="sidebar-link reco-side-find-peak-element-寻找峰值" data-v-70334359>Find Peak Element - 寻找峰值</a></li><li class="level-3" data-v-70334359><a href="/Algorithm/binary_search.html#lc875-爱吃香蕉的珂珂" class="sidebar-link reco-side-lc875-爱吃香蕉的珂珂" data-v-70334359>LC875 爱吃香蕉的珂珂</a></li><li class="level-3" data-v-70334359><a href="/Algorithm/binary_search.html#lc1011-在-d-天内送达包裹的能力" class="sidebar-link reco-side-lc1011-在-d-天内送达包裹的能力" data-v-70334359>LC1011 在 D 天内送达包裹的能力</a></li><li class="level-3" data-v-70334359><a href="/Algorithm/binary_search.html#lc826-安排工作以达到最大收益" class="sidebar-link reco-side-lc826-安排工作以达到最大收益" data-v-70334359>LC826 安排工作以达到最大收益</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><!----></div></div>
    <script src="/assets/js/app.ff413545.js" defer></script><script src="/assets/js/3.a9798fbe.js" defer></script><script src="/assets/js/1.76b01c69.js" defer></script><script src="/assets/js/15.8fb23eac.js" defer></script><script src="/assets/js/9.0cdfd736.js" defer></script>
  </body>
</html>
