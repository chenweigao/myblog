(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{405:function(s,a,e){"use strict";e.r(a);var t=e(3),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"installation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[s._v("#")]),s._v(" Installation")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("Follow the "),e("a",{attrs:{href:"https://docs.docker.com/install/linux/docker-ce/ubuntu/#os-requirements",target:"_blank",rel:"noopener noreferrer"}},[s._v("tutorial"),e("OutboundLink")],1)])]),s._v(" "),e("li",[e("p",[s._v("Test whether the Docker is installed correctly (Ubuntu 16.04)")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker container run hello-world\n\ndocker --version\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker info\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker image "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("-all"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])])]),s._v(" "),e("li",[e("p",[s._v("List the versions available in your repo:")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-cache")]),s._v(" madison docker-ce\n")])])])])]),s._v(" "),e("h2",{attrs:{id:"containers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#containers"}},[s._v("#")]),s._v(" Containers")]),s._v(" "),e("p",[s._v("Make sure all is set up:")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("docker run hello-world\n")])])]),e("p",[s._v("Run the app, before this, a "),e("code",[s._v("Dockerfile")]),s._v(" should be created:")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker run -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4000")]),s._v(":80 friendlyhello\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker run -d -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4000")]),s._v(":80 friendlyhello\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# run on background")]),s._v("\n")])])]),e("p",[s._v("将 Docker 的 80 端口映射出去至 4000 端口，如果是在后台运行的话，可查看：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker container "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#stop")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker container stop 1fa4a"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])])]),e("h2",{attrs:{id:"share-images"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#share-images"}},[s._v("#")]),s._v(" Share images")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("Login")])]),s._v(" "),e("li",[e("p",[s._v("Tag the image")])]),s._v(" "),e("li",[e("p",[s._v("Push the image")])]),s._v(" "),e("li",[e("p",[s._v("Pull")])])]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker login\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker tag friendlyhello weigaochen/get-started:part2\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker tag image username/respository:tag")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker image "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker push weigaochen/get-started:part2\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker run -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4000")]),s._v(":801 weigaochen/get-started:part2\n")])])]),e("h2",{attrs:{id:"services"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#services"}},[s._v("#")]),s._v(" Services")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("通过 "),e("code",[s._v("docker-compose.yml")]),s._v(" 来配置，在其中引用已经 Published 的 image")]),s._v(" "),e("blockquote",[e("p",[s._v("A "),e("code",[s._v("docker-compose.yml")]),s._v(" file is a YAML file that defines how Docker containers should behave in production.")])])]),s._v(" "),e("li",[e("p",[s._v("Run the new load-balanced app")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker swarm init\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker stack deploy -c docker-compose.yml getstartedlab\n")])])]),e("p",[s._v("注意到其中的 "),e("code",[s._v("getstartedlab")]),s._v(" 是我们给 app 起的一个名字")])]),s._v(" "),e("li",[e("p",[s._v("查看："),e("code",[s._v("sudo docker service ls")])]),s._v(" "),e("p",[s._v("注意到 "),e("code",[s._v("NAME")]),s._v(" 属性的值为 "),e("code",[s._v("getstartedlab_web")]),s._v(".")])])]),s._v(" "),e("h3",{attrs:{id:"task"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#task"}},[s._v("#")]),s._v(" Task")]),s._v(" "),e("blockquote",[e("p",[s._v("A single container running in a service is called a task.")])]),s._v(" "),e("p",[s._v("Let us list the "),e("strong",[s._v("task")]),s._v(":")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" getstartedlab_web\n")])])]),e("p",[s._v("如果顺利的话，这时候可以看到 5 个 task: "),e("code",[s._v("getstartedlab_web.1")]),s._v(" 至 "),e("code",[s._v("getstartedlab_web.5")]),s._v(", 原因是我们在  "),e("code",[s._v("docker-compose.yml")]),s._v(" 文件中配置了 5 个 "),e("code",[s._v("replices")]),s._v(".")]),s._v(" "),e("h2",{attrs:{id:"swarms"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#swarms"}},[s._v("#")]),s._v(" Swarms")]),s._v(" "),e("p",[e("strong",[s._v("KEYWORDS")]),s._v(": swarm manager, workers, swarm clusters")])])}),[],!1,null,null,null);a.default=n.exports}}]);