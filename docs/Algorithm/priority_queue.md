---
title: "Algorithm of Priority Queue"
date: 2021-11-29
tags:
 - algorithm
categories:
 - Algorithm
---

â¸â¸â¹â¹â¯ ä¼˜å…ˆçº§é˜Ÿåˆ—çš„åŸç†ä»¥åŠåº”ç”¨ã€‚

1. å¤§æ ¹å †
2. å°æ ¹å †

<!-- more -->

## å¤§æ ¹å †ä¸å°æ ¹å †

### å¤§æ ¹å †

ä»€ä¹ˆæ˜¯å¤§æ ¹å †ï¼Ÿ

### å°æ ¹å †

ä»€ä¹ˆæ˜¯å°æ ¹å †ï¼ŸPython é»˜è®¤æ˜¯å°æ ¹å †ã€‚

```python
a = [1, 3, 2, -1, 0]
heapq.heapify(a)
heapq.heappop(a) # -1
```

## ä¼˜å…ˆçº§é˜Ÿåˆ—

### åŸç†ä¸å®ç°

ğŸ§¡ğŸ’›ğŸ’š åœ¨ Python ä¸­ï¼Œä½¿ç”¨å †(heapq)æ¥å®ç°ä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚

- åˆå§‹åŒ–æ—¶ï¼Œç›´æ¥å°†ä¼˜å…ˆçº§é˜Ÿåˆ—åˆå§‹åŒ–ä¸ºåˆ—è¡¨ï¼š`heap = []`;
- python ä½¿ç”¨å †çš„æ—¶å€™ï¼Œ**é»˜è®¤æ˜¯å°æ ¹å †**ã€‚



### LC786 ç¬¬ K ä¸ªæœ€å°çš„ç´ æ•°åˆ†æ•°

#### [786. ç¬¬ K ä¸ªæœ€å°çš„ç´ æ•°åˆ†æ•°](https://leetcode-cn.com/problems/k-th-smallest-prime-fraction/)

> ç»™ä½ ä¸€ä¸ªæŒ‰é€’å¢é¡ºåºæ’åºçš„æ•°ç»„ arr å’Œä¸€ä¸ªæ•´æ•° k ã€‚æ•°ç»„ arr ç”± 1 å’Œè‹¥å¹² ç´ æ•°  ç»„æˆï¼Œä¸”å…¶ä¸­æ‰€æœ‰æ•´æ•°äº’ä¸ç›¸åŒã€‚
>
> å¯¹äºæ¯å¯¹æ»¡è¶³ 0 < i < j < arr.length çš„ i å’Œ j ï¼Œå¯ä»¥å¾—åˆ°åˆ†æ•° arr[i] / arr[j] ã€‚
>
> é‚£ä¹ˆç¬¬ k ä¸ªæœ€å°çš„åˆ†æ•°æ˜¯å¤šå°‘å‘¢?  ä»¥é•¿åº¦ä¸º 2 çš„æ•´æ•°æ•°ç»„è¿”å›ä½ çš„ç­”æ¡ˆ, è¿™é‡Œ answer[0] == arr[i] ä¸” answer[1] == arr[j] ã€‚
>
> arr = [1,2,3,5], k = 3
> 
> è¾“å‡ºï¼š[2,5]

é‡åˆ°ç¬¬ k å¤§ã€ç¬¬ k å°çš„é—®é¢˜ï¼Œæˆ‘ä»¬é€šå¸¸çš„æ€è·¯å°±æ˜¯ä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—æ¥å®ç°ã€‚

è¯¥é—®é¢˜çš„å®ç°ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```python
class Solution:
    def kthSmallestPrimeFraction(self, arr: List[int], k: int) -> List[int]:
        heap = []

        # é»˜è®¤å°æ ¹å †
        n = len(arr)
        # å…ˆæŠŠæœ€å°çš„é‚£å †æ•°å…¥å †
        for i in range(1, n):
            heapq.heappush(heap, (arr[0] / arr[i], 0, i))
        i, j = 0, 0
        # why k
        for _ in range(k):
            val, i, j = heapq.heappop(heap)
            if i + 1 < j:
                heapq.heappush(heap, (arr[i + 1] / arr[j], i + 1, j))
        # why not heap
        return [arr[i], arr[j]]
```

è¿™ä¸ªä»£ç å®ç°ä¸­ï¼Œæœ‰å¾ˆå¤šéœ€è¦æ³¨æ„çš„ç»†èŠ‚ï¼š

1. è®°ä½ Python é»˜è®¤çš„æ˜¯å°æ ¹å †ï¼›
2. æˆ‘ä»¬åœ¨ `for` å¾ªç¯ä¸­å¾ªç¯äº† `k` æ¬¡ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¼šå¾ªç¯ `k-1`æ¬¡ï¼›è¿™ä¸ªç»†èŠ‚éœ€è¦ç•™æ„ï¼Œåç»­é€šè¿‡æ¯”è¾ƒä¸åŒçš„é¢˜è§£å¯¹å½’ç±»è¿›è¡Œæ€»ç»“ï¼›
3. æˆ‘ä»¬æŠŠæœ€å°çš„åˆ†æ•°ï¼ˆåˆ†å­ä¸º 1ï¼Œåˆ†æ¯ä¸ºæ‰€æœ‰æ•°æ„æˆçš„å°æ ¹å †çš„å †é¡¶å…ƒç´ ï¼‰æ‹¿å‡ºæ¥ï¼Œç„¶åå°†æ¯”è¿™ä¸ªå…ƒç´ å¤§çš„å…ƒç´ æ”¾è¿›å †ï¼ˆç›®çš„æ˜¯ä¸ºäº†æ¯”è¾ƒæ”¾è¿›å †çš„å…ƒç´ å’ŒåŸæœ‰å †ä¸­çš„å…ƒç´ çš„å¤§å°ï¼‰ï¼Œè€ŒåæŒ‰ç…§é¡ºåºå‡ºå †ï¼Œåˆ°ç¬¬ k ä¸ªå³ä¸ºæˆ‘ä»¬éœ€è¦çš„å…ƒç´ ã€‚



### LC215 æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ 

#### [æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ ](https://leetcode-cn.com/problems/kth-largest-element-in-an-array/)

> ç»™å®šæ•´æ•°æ•°ç»„ `nums` å’Œæ•´æ•° `k`ï¼Œè¯·è¿”å›æ•°ç»„ä¸­ç¬¬ `**k**` ä¸ªæœ€å¤§çš„å…ƒç´ ã€‚
>
> è¯·æ³¨æ„ï¼Œä½ éœ€è¦æ‰¾çš„æ˜¯æ•°ç»„æ’åºåçš„ç¬¬ `k` ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ `k` ä¸ªä¸åŒçš„å…ƒç´ ã€‚
>
> è¾“å…¥: [3,2,1,5,6,4] å’Œ k = 2
>
> è¾“å‡º: 5

#### å°æ ¹å †æ±‚è§£

è¿™ä¹Ÿæ˜¯ä¸€ä¸ªåº”ç”¨å°æ ¹å †æ±‚è§£çš„é—®é¢˜ï¼Œå…¶å®ç°ä»£ç å¦‚ä¸‹ï¼š

```python
class Solution:
    def findKthLargest(self, nums: List[int], k: int) -> int:
        heap = [x for x in nums[:k]]
        heapq.heapify(heap)
        for i in range(k, len(nums)):
            if nums[i] > heap[0]:
                heapq.heappop(heap)
                heapq.heappush(heap, nums[i])
        return heap[0]
```

ä»ä¸Šæ®µä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼š

1. åœ¨å»ºç«‹å°æ ¹å †çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç›´æ¥å–äº†æ•°ç»„çš„å‰ k ä¸ªå…ƒç´ ï¼Œç”¨äºå»ºå †ï¼Œå¦‚æ­¤ä¸€æ¥æˆ‘ä»¬å¯ä»¥ä»æ•°ç»„çš„å‰©ä½™å…ƒç´ ä¸­ä¸€ä¸ªä¸€ä¸ªæ·»åŠ å…ƒç´ ï¼Œæ¯å¢åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå †é¡¶æœ€å°çš„å…ƒç´ å°±å‡ºå †äº†ï¼Œç›´åˆ°æˆ‘ä»¬å°†åŸæ•°ç»„ä¸­æ‰€æœ‰çš„å…ƒç´ éƒ½å…¥å †äº†ï¼Œæœ€åç•™ä¸‹äº†å®¹é‡ä¸º k çš„å°æ ¹å †ï¼Œå †é¡¶çš„å…ƒç´ å°±æ˜¯ç¬¬ k å¤§çš„å…ƒç´ ï¼›
2. éœ€è¦æ³¨æ„ï¼Œæˆ‘ä»¬åœ¨æ˜¯å¦å‡ºå †çš„æ—¶å€™æœ‰ä¸€ä¸ªåˆ¤æ–­ï¼Œå³å¦‚æœå½“å‰çš„å…ƒç´ æ¯”å †é¡¶å…ƒç´ å¤§ï¼Œæˆ‘ä»¬å°±æŠŠå †é¡¶å…ƒç´ å‡ºæ¨ã€‚

#### å¤§æ ¹å †æ±‚è§£

é™¤äº†è¿™ç§å°æ ¹å †çš„è§£æ³•ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å¤§æ ¹å †æ¥æ±‚è§£è¿™ä¸ªé—®é¢˜ï¼Œç”¨å¤§æ ¹å †æ±‚è§£çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦å°†å † pop k æ¬¡ï¼Œå°±å¯ä»¥å¾—åˆ°ç¬¬ k å¤§çš„å…ƒç´ ã€‚

```python
class Solution:
    def findKthLargest(self, nums: List[int], k: int) -> int:
        heap = [-x for x in nums]
        heapq.heapify(heap)
        for _ in range(k - 1):
            heapq.heappop(heap)

        return -heap[0]
```

ä½†æ˜¯æˆ‘ä»¬å¾ˆå®¹æ˜“çœ‹å‡ºï¼Œè¿™ç§æ–¹æ³•å°†æ•´ä¸ªæ•°ç»„éƒ½ç”¨äºå»ºå †äº†ï¼Œå…¶æ€§èƒ½åŠ¿å¿…å—åˆ°å½±å“ï¼Œåœ¨æ­¤æ˜¯ä¸ºäº†å±•ç¤ºå¤§æ ¹å †æ±‚è§£è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•ã€‚





